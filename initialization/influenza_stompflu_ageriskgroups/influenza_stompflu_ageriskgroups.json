{
    "$schema": "https://raw.githubusercontent.com/NSSAC/EpiHiper-Schema/master/schema/templateSchema.json",
    "epiHiperSchema": "https://raw.githubusercontent.com/NSSAC/EpiHiper-Schema/master/schema/templateSchema.json",
    "ann:id": "CDC_age_risk_groups",
    "ann:label": "Initialization of a population into proper age and risk based susceptible states",
    "ann:description": "For age and risk expanded influenza models, with appropriate age-risk Susceptible states, initialize all individuals to their proper initial state.",
    "template": {
        "$schema": "https://raw.githubusercontent.com/NSSAC/EpiHiper-Schema/master/schema/initializationSchema.json",
        "epiHiperSchema": "https://raw.githubusercontent.com/NSSAC/EpiHiper-Schema/master/schema/initializationSchema.json",
        "initializations": [
            {
                "target": {
                    "elementType": "node",
                    "scope": "local",
                    "left": {"field": "age_group"},
                    "operator": "==",
                    "right": {"value": "p"}
                },
                "sampling": {
                    "type": "individual",
                    "number": 93,
                    "sampled": {
                        "foreach": [
                            {
                                "operations": [
                                    {
                                        "target": {
                                            "node": {"property": "healthState"}
                                        },
                                        "operator": "=",
                                        "value": {"healthState": "S_pl"}
                                    }
                                ]
                            }
                        ]
                    },
                    "nonsampled": {
                        "foreach": [
                            {
                                "operations": [
                                    {
                                        "target": {
                                            "node": {"property": "healthState"}
                                        },
                                        "operator": "=",
                                        "value": {"healthState": "S_ph"}
                                    }
                                ]
                            }
                        ]
                    }
                }
            },
            {
                "target": {
                    "elementType": "node",
                    "scope": "local",
                    "left": {"field": "age_group"},
                    "operator": "==",
                    "right": {"value": "s"}
                },
                "sampling": {
                    "type": "individual",
                    "number": 88,
                    "sampled": {
                        "foreach": [
                            {
                                "operations": [
                                    {
                                        "target": {
                                            "node": {"property": "healthState"}
                                        },
                                        "operator": "=",
                                        "value": {"healthState": "S_sl"}
                                    }
                                ]
                            }
                        ]
                    },
                    "nonsampled": {
                        "foreach": [
                            {
                                "operations": [
                                    {
                                        "target": {
                                            "node": {"property": "healthState"}
                                        },
                                        "operator": "=",
                                        "value": {"healthState": "S_sh"}
                                    }
                                ]
                            }
                        ]
                    }
                }
            },
            {
                "target": {
                    "elementType": "node",
                    "scope": "local",
                    "left": {"field": "age_group"},
                    "operator": "==",
                    "right": {"value": "a"}
                },
                "sampling": {
                    "type": "individual",
                    "number": 85,
                    "sampled": {
                        "foreach": [
                            {
                                "operations": [
                                    {
                                        "target": {
                                            "node": {"property": "healthState"}
                                        },
                                        "operator": "=",
                                        "value": {"healthState": "S_al"}
                                    }
                                ]
                            }
                        ]
                    },
                    "nonsampled": {
                        "foreach": [
                            {
                                "operations": [
                                    {
                                        "target": {
                                            "node": {"property": "healthState"}
                                        },
                                        "operator": "=",
                                        "value": {"healthState": "S_ah"}
                                    }
                                ]
                            }
                        ]
                    }
                }
            },
            {
                "target": {
                    "elementType": "node",
                    "scope": "local",
                    "left": {"field": "age_group"},
                    "operator": "==",
                    "right": {"value": "o"}
                },
                "sampling": {
                    "type": "individual",
                    "number": 69,
                    "sampled": {
                        "foreach": [
                            {
                                "operations": [
                                    {
                                        "target": {
                                            "node": {"property": "healthState"}
                                        },
                                        "operator": "=",
                                        "value": {"healthState": "S_ol"}
                                    }
                                ]
                            }
                        ]
                    },
                    "nonsampled": {
                        "foreach": [
                            {
                                "operations": [
                                    {
                                        "target": {
                                            "node": {"property": "healthState"}
                                        },
                                        "operator": "=",
                                        "value": {"healthState": "S_oh"}
                                    }
                                ]
                            }
                        ]
                    }
                }
            },
            {
                "target": {
                    "elementType": "node",
                    "scope": "local",
                    "left": {"field": "age_group"},
                    "operator": "==",
                    "right": {"value": "g"}
                },
                "sampling": {
                    "type": "individual",
                    "number": 53,
                    "sampled": {
                        "foreach": [
                            {
                                "operations": [
                                    {
                                        "target": {
                                            "node": {"property": "healthState"}
                                        },
                                        "operator": "=",
                                        "value": {"healthState": "S_gl"}
                                    }
                                ]
                            }
                        ]
                    },
                    "nonsampled": {
                        "foreach": [
                            {
                                "operations": [
                                    {
                                        "target": {
                                            "node": {"property": "healthState"}
                                        },
                                        "operator": "=",
                                        "value": {"healthState": "S_gh"}
                                    }
                                ]
                            }
                        ]
                    }
                }
            }
        ]
    },
    "userInput": [
        {
            "ann:id": "lowrisk_preschool",
            "ann:label": "Proportion Low Risk for Age Group 0-4",
            "ann:description": "Proportion of individuals with low risk for severe influenza outcomes in Preshool Age Group (0-4)",
            "value": ["/template/initializations/1/sampling/number"],
            "exceads": {
                "minValue": 0,
                "maxValue": 100,
                "sweep": false,
                "calibrate": false
            }
        },
        {
            "ann:id": "lowrisk_school",
            "ann:label": "Proportion Low Risk for Age Group 5-17",
            "ann:description": "Proportion of individuals with low risk for severe influenza outcomes in School Age Group (5-17)",
            "value": ["/template/initializations/2/sampling/number"],
            "exceads": {
                "minValue": 0,
                "maxValue": 100,
                "sweep": false,
                "calibrate": false
            }
        },
        {
            "ann:id": "lowrisk_adult",
            "ann:label": "Proportion Low Risk for Age Group 18-49",
            "ann:description": "Proportion of individuals with low risk for severe influenza outcomes in Adult Age Group (18-49)",
            "value": ["/template/initializations/3/sampling/number"],
            "exceads": {
                "minValue": 0,
                "maxValue": 100,
                "sweep": false,
                "calibrate": false
            }
        },
        {
            "ann:id": "lowrisk_olderadult",
            "ann:label": "Proportion Low Risk for Age Group 50-64",
            "ann:description": "Proportion of individuals with low risk for severe influenza outcomes in Older Adult Age Group (50-64)",
            "value": ["/template/initializations/4/sampling/number"],
            "exceads": {
                "minValue": 0,
                "maxValue": 100,
                "sweep": false,
                "calibrate": false
            }
        },
        {
            "ann:id": "lowrisk_golden",
            "ann:label": "Proportion Low Risk for Age Group 65+",
            "ann:description": "Proportion of individuals with low risk for severe influenza outcomes in Golden Age Group (65+)",
            "value": ["/template/initializations/5/sampling/number"],
            "exceads": {
                "minValue": 0,
                "maxValue": 100,
                "sweep": false,
                "calibrate": false
            }
        }
    ],
    "requirements": [
        {
            "field": "age_group"
        },
        {
            "jsonPath": "$.schema.fields[?(@.name=='age_group')].constraints.enum[(@.indexOf('p'))]"
        },
        {
            "jsonPath": "$.schema.fields[?(@.name=='age_group')].constraints.enum[(@.indexOf('s'))]"
        },
        {
            "jsonPath": "$.schema.fields[?(@.name=='age_group')].constraints.enum[(@.indexOf('a'))]"
        },
        {
            "jsonPath": "$.schema.fields[?(@.name=='age_group')].constraints.enum[(@.indexOf('o'))]"
        },
        {
            "jsonPath": "$.schema.fields[?(@.name=='age_group')].constraints.enum[(@.indexOf('g'))]"
        }
    ],
    "exceads": {
        "requires": {
            "allOf": ["influenza_stompflu_agegroups.json"]
        }
    }
}